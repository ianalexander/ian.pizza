<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><meta name="author" content=""><title> ian.pizza</title><link rel="stylesheet" href="/css/style.css"><meta name="layout" content="b/2013/04/16/getting-started-with-django-logging-in-5-minutes/index.html"><script>var disqus_config = function () {
    this.page.url = url;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = path; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() {  // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    
    s.src = '//ianalexandr.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();</script></head><body><div id="container"><div id="nav"><div><a href="/">h</a> / <a href="/b">b</a></div><div><a href="https://www.facebook.com/ian.m.alexander">fb</a> / <a href="https://www.snapchat.com/add/ianalexan">sc</a> / <a href="http://instagram.com/ianalexan">ig</a> / <a href="https://github.com/ianalexander">gh</a> / <a href="https://www.linkedin.com/in/ianmalexander">li</a></div></div><div id="cover"><div id="title"><h1>Getting Started with Django Logging in 5 Minutes</h1><span> Apr 16 2013</span></div></div><div id="content"><p>Setting up Django logging can sometimes be a little complex, so here are the no-nonsense steps required to make a new Django 1.5 instance log to a file without hassles. We’re going to look at each of the 4 components of Django logging:</p>
<ol>
<li><strong>Loggers:</strong> a <em>logger</em> is the object that we will use to pass messages to the logging system</li>
<li><strong>Handlers:</strong> the <em>handler</em> is an engine that determines what to do with a message when it is recieved from the <em>logger</em></li>
<li><strong>Filters:</strong> allow you to restrict the type of messages that are sent from the <em>logger</em> to the <em>handler</em></li>
<li><strong>Formatters:</strong> describe the text representation of the log message</li>
</ol>
<p>Simple, right? For more information, check out the <a href="https://docs.djangoproject.com/en/1.5/topics/logging/" target="_blank" rel="external">Django documentation on logging</a>.</p>
<h2 id="Setting-up-your-Project-for-Logging"><a href="#Setting-up-your-Project-for-Logging" class="headerlink" title="Setting up your Project for Logging"></a>Setting up your Project for Logging</h2><p>Logging configuration is specified in your project’s <code>settings.py</code> file. Let’s go through each of the four components from bottom to top, one-by-one and explain what we’re going to do.</p>
<h2 id="Formatters"><a href="#Formatters" class="headerlink" title="Formatters"></a>Formatters</h2><p>First let’s declare the format that we can log entries in. I’m going to use two formats, <code>verbose</code> and <code>simple</code>:</p>
<pre><code class="python">    &#39;formatters&#39;: {
        &#39;verbose&#39;: {
            &#39;format&#39; : &quot;[%(asctime)s] %(levelname)s [%(name)s:%(lineno)s] %(message)s&quot;,
            &#39;datefmt&#39; : &quot;%d/%b/%Y %H:%M:%S&quot;
        },
        &#39;simple&#39;: {
            &#39;format&#39;: &#39;%(levelname)s %(message)s&#39;
        },
    },
</code></pre>
<h2 id="Filters"><a href="#Filters" class="headerlink" title="Filters"></a>Filters</h2><p>In my example, I don’t want to filter anything. But if I did my filters would look like so:</p>
<pre><code class="python">    &#39;filters&#39;: {
        &#39;special&#39;: {
            &#39;()&#39;: &#39;project.logging.SpecialFilter&#39;,
            &#39;foo&#39;: &#39;bar&#39;,
        }
    },
</code></pre>
<p>This defines one filter, project.logging.SpecialFilter, using the alias special. In this case, the argument foo will be given a value of bar when instantiating the SpecialFilter.</p>
<h2 id="Handlers"><a href="#Handlers" class="headerlink" title="Handlers"></a>Handlers</h2><p>This is where it gets fun. Now we’re going to tell Django to log all of our output messages to a file:</p>
<pre><code class="python">    &#39;handlers&#39;: {
        &#39;file&#39;: {
            &#39;level&#39;: &#39;DEBUG&#39;,
            &#39;class&#39;: &#39;logging.FileHandler&#39;,
            &#39;filename&#39;: &#39;mysite.log&#39;,
            &#39;formatter&#39;: &#39;verbose&#39;
        },
    },
</code></pre>
<p><code>level</code> means to log anything <code>DEBUG</code> or higher (which includes all levels) with this handler.</p>
<h2 id="Loggers"><a href="#Loggers" class="headerlink" title="Loggers"></a>Loggers</h2><p>Finally, we will declare two loggers to be used, one for the django core and one for your application:</p>
<pre><code class="python">    &#39;loggers&#39;: {
        &#39;django&#39;: {
            &#39;handlers&#39;:[&#39;file&#39;],
            &#39;propagate&#39;: True,
            &#39;level&#39;:&#39;DEBUG&#39;,
        },
        &#39;MYAPP&#39;: {
            &#39;handlers&#39;: [&#39;file&#39;],
            &#39;level&#39;: &#39;DEBUG&#39;,
        },
    }
</code></pre>
<p>Replace <code>MYAPP</code> with the name of your application to test things out.</p>
<h2 id="Full-Project-Configuration"><a href="#Full-Project-Configuration" class="headerlink" title="Full Project Configuration"></a>Full Project Configuration</h2><p>According to the above, we should now have a logging config in <code>settings.py</code> that looks like this:</p>
<pre><code class="python"># settings.py
LOGGING = {
    &#39;version&#39;: 1,
    &#39;disable_existing_loggers&#39;: False,
    &#39;formatters&#39;: {
        &#39;verbose&#39;: {
            &#39;format&#39; : &quot;[%(asctime)s] %(levelname)s [%(name)s:%(lineno)s] %(message)s&quot;,
            &#39;datefmt&#39; : &quot;%d/%b/%Y %H:%M:%S&quot;
        },
        &#39;simple&#39;: {
            &#39;format&#39;: &#39;%(levelname)s %(message)s&#39;
        },
    },
    &#39;handlers&#39;: {
        &#39;file&#39;: {
            &#39;level&#39;: &#39;DEBUG&#39;,
            &#39;class&#39;: &#39;logging.FileHandler&#39;,
            &#39;filename&#39;: &#39;mysite.log&#39;,
            &#39;formatter&#39;: &#39;verbose&#39;
        },
    },
    &#39;loggers&#39;: {
        &#39;django&#39;: {
            &#39;handlers&#39;:[&#39;file&#39;],
            &#39;propagate&#39;: True,
            &#39;level&#39;:&#39;DEBUG&#39;,
        },
        &#39;MYAPP&#39;: {
            &#39;handlers&#39;: [&#39;file&#39;],
            &#39;level&#39;: &#39;DEBUG&#39;,
        },
    }
}
</code></pre>
<h2 id="Testing-Logging"><a href="#Testing-Logging" class="headerlink" title="Testing Logging"></a>Testing Logging</h2><p>Let’s go to our <code>views.py</code> file and create some new functions that use logging:</p>
<pre><code class="python"># views.py
import logging
logger = logging.getLogger(__name__)

def myfunction():
    logger.debug(&quot;this is a debug message!&quot;)

def myotherfunction():
    logger.error(&quot;this is an error message!!&quot;)
</code></pre>
<p>Now we’ll use the shell to call these functions.</p>
<pre><code class="pycon">&gt;&gt;&gt; from polls.views import *
&gt;&gt;&gt; myfunction()
&gt;&gt;&gt; myotherfunction()
</code></pre>
<p>And here is the output in our mysite.log file:</p>
<pre><code class="bash">[16/Apr/2013 09:49:38] DEBUG [polls.views:7] this is a debug message!
[16/Apr/2013 09:49:46] ERROR [polls.views:10] this is an error message!!
</code></pre>
<h2 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><p>If you have a complex project with multiple applications, you can create multiple handlers with different file names to have multiple log files. As always, <a href="https://docs.djangoproject.com/en/1.5/topics/logging/" target="_blank" rel="external">read the docs</a> and good luck!</p>
<div id="disqus_thread"></div></div><div id="footer"><div>designed in san francisco —
licensed as <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">cc-by-nc-nd</a></div></div></div><script src="https://npmcdn.com/headroom.js@0.8.0/dist/headroom.min.js"></script><script type="text/javascript">var headroom = new Headroom(document.getElementById("nav"));
headroom.init();</script></body></html>